serviceMaps:
  serviceName: project
  mappings:
    - version: 1.0
      description: Saves a project task
      fromTopic: save-project-task-topic
      isTransaction: true
      queryMaps:
        - query: INSERT INTO project_task(id, tenantId, projectId, projectBeneficiaryId, plannedStartDate, plannedEndDate, actualStartDate, actualEndDate, addressId, additionalDetails, createdBy, createdTime, lastModifiedBy, lastModifiedTime, rowVersion, isDeleted) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);
          basePath: $.*
          jsonMaps:
            - jsonPath: $.*.id
            - jsonPath: $.*.tenantId
            - jsonPath: $.*.projectId
            - jsonPath: $.*.projectBeneficiaryId
            - jsonPath: $.*.plannedStartDate
            - jsonPath: $.*.plannedEndDate
            - jsonPath: $.*.actualStartDate
            - jsonPath: $.*.actualEndDate
            - jsonPath: $.*.address.id
            - jsonPath: $.*.additionalFields
              type: JSON
              dbType: JSONB
            - jsonPath: $.*.auditDetails.createdBy
            - jsonPath: $.*.auditDetails.lastModifiedBy
            - jsonPath: $.*.auditDetails.createdTime
            - jsonPath: $.*.auditDetails.lastModifiedTime
            - jsonPath: $.*.rowVersion
            - jsonPath: $.*.isDeleted

        - query: INSERT INTO ADDRESS(id, tenantid, doorno, latitude, longitude, locationAccuracy, type, addressline1, addressline2, landmark, city, pincode, buildingName, street, localityCode) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.*.address
          jsonMaps:
            - jsonPath: $.*.address.id
            - jsonPath: $.*.address.tenantId
            - jsonPath: $.*.address.doorNo
            - jsonPath: $.*.address.latitude
            - jsonPath: $.*.address.longitude
            - jsonPath: $.*.address.locationAccuracy
            - jsonPath: $.*.address.type
            - jsonPath: $.*.address.addressLine1
            - jsonPath: $.*.address.addressLine2
            - jsonPath: $.*.address.landmark
            - jsonPath: $.*.address.city
            - jsonPath: $.*.address.pincode
            - jsonPath: $.*.address.buildingName
            - jsonPath: $.*.address.street
            - jsonPath: $.*.address.locality.code

        - query: INSERT INTO TASK_RESOURCE(id, tenantid, productvariantid, taskid, quantity, isDelivered, reasonIfNotDelivered, createdBy, createdTime, lastModifiedBy, lastModifiedTime, rowVersion, isDeleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.*.resources
          jsonMaps:
            - jsonPath: $.*.resources.id
            - jsonPath: $.*.resources.tenantId
            - jsonPath: $.*.resources.productVariantId
            - jsonPath: $.*.id
            - jsonPath: $.*.resources.quantity
            - jsonPath: $.*.resources.isDelivered
            - jsonPath: $.*.resources.deliveryComment
            - jsonPath: $.*.auditDetails.createdBy
            - jsonPath: $.*.auditDetails.createdTime
            - jsonPath: $.*.auditDetails.lastModifiedBy
            - jsonPath: $.*.auditDetails.lastModifiedTime
            - jsonPath: $.*.rowVersion
            - jsonPath: $.*.isDeleted